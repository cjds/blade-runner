@extends('layouts.master')

@if($type=="edit")
<?php $tagArray=array();?>
@foreach ($question->tags as $tag) 
	<?php $tagArray[]=$tag->tag_name;?>
@endforeach
@endif


@section('content')

<div class="row">
		@if($type=="new")
			<legend>Add question</legend>
			{{Form::open(array('url' => 'add/question' ))}}
		@elseif($type=="edit")
			<legend>Edit question</legend>
			{{Form::open(array('url' => 'edit/question' ))}}
			{{Form::hidden('question_id', $question->post_id);}}
		@endif
		<div class="span4 offset1">
			@if($errors->any())
			<div class="alert alert-error">
				<a href="#" class="close" data-dismiss="alert">&times;</a>
				{{implode('',$errors->all('<li class="error">:message</li>'))}}
			</div>
			@endif
		{{Form::label('title', 'Title')}}<br>
		{{Form::text('title',($type=='edit')?$question->question_title:'', array('style' => 'width:400px'))}}
		{{Form::label('question', 'Body')}}<br>
		{{Form::textarea('question',($type=='edit')?$question->question_body:'', array('style' => 'width:400px'))}}
		{{Form::label('tags', 'Tags')}}<br>

		{{Form::text('tags',($type=='edit')?implode(',', $tagArray):'', array('style' => 'width:400px'))}}
		{{Form::submit(($type=='edit')?'Edit Question':'Add Question')}}
	</div>
</div>
@stop